(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-02b7629c"],{"24ac":function(t,e,a){},bb51:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-container",[a("el-header",[a("el-row",[a("el-col",{staticStyle:{float:"right","line-height":"56px"},attrs:{span:3}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-select",{attrs:{filterable:"",placeholder:"请选择病人"},on:{change:t.change},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},t._l(t.patientArray,function(t){return a("el-option",{key:t.id,attrs:{label:t.patient_name,value:t.id}})}),1)],1)]),a("el-col",{attrs:{span:21}},[a("div",{staticClass:"grid-content"},[a("ul",[a("el-col",{attrs:{span:6}},[a("li",[a("span",[t._v("姓名：")]),a("label",{attrs:{for:""}},[t._v(t._s(t.currentName))])])]),a("el-col",{attrs:{span:6}},[a("li",[a("span",[t._v("性别：")]),a("label",{attrs:{for:""}},[t._v(t._s(t.currentSex))])])]),a("el-col",{attrs:{span:6}},[a("li",[a("span",[t._v("年龄：")]),a("label",{attrs:{for:""}},[t._v(t._s(t.currentAge))])])])],1)])])],1)],1),t.isShown?a("el-main",{staticStyle:{"flex-basis":"0"}},[a("div",{staticClass:"container",attrs:{id:"container"}},[a("div",{staticClass:"form-control p-0 mb-3",staticStyle:{"margin-top":"100px"},attrs:{id:"timer"}},[a("span",{attrs:{id:"runner"}},[t._v(t._s(t.timeResult))]),a("br"),a("br")]),a("div",{staticClass:"btn-group"},[a("el-button",{attrs:{id:"start",type:"primary",disabled:t.startDis},on:{click:function(e){return t.startRecording()}}},[t._v("开始")]),a("el-button",{attrs:{id:"stop",type:"primary",disabled:t.stopDis},on:{click:function(e){return t.stopRecording()}}},[t._v("停止")])],1)])]):t._e()],1)},n=[],i=(a("7f7f"),a("cadf"),a("551c"),a("f751"),a("097d"),a("1157"),{name:"Home",data:function(){return{userData:JSON.parse(sessionStorage.getItem("user")),value:"",pageSize:10,currentPage:1,patientArray:[],isShown:!1,currentName:"",currentSex:"",currentAge:"",currentId:"",recorder:null,startDis:!1,stopDis:!0,playDis:!0,talkUrl:"/robot/index.html?id=",hour:0,minute:0,seconds:0,timeInterval:null,timeResult:null}},created:function(){this.getList()},methods:{getList:function(){var t=this;JSON.parse(sessionStorage.getItem("user"));axios({url:"/API/base-api/query-patient/",params:{page:t.currentPage,size:t.pageSize,user_id:t.userData.id}}).then(function(e){e.data.results.length?t.patientArray=e.data.results:t.$router.push({path:"/PatientInfo"})})},change:function(t){var e=this;e.isShown=!1,e.patientArray.map(function(a){a.id==t&&(e.currentAge=a.patient_age,e.currentName=a.patient_name,e.currentSex=a.patient_sex?"女":"男",e.currentId=a.id,e.isShown=!0,e.openAudio(),sessionStorage.setItem("patient_id",a.id))})},openAudio:function(){var t=this;function e(a){-1!=a.name.indexOf("NotReadableError")&&navigator.mediaDevices.getUserMedia({audio:!0}).then(function(e){t.mediaStreamTrack=e.getTracks()[0];var a=t.audio_context.createMediaStreamSource(e);t.recorder=new Recorder(a)}).catch(e)}t.audio_context=new AudioContext,navigator.mediaDevices.getUserMedia({audio:!0}).then(function(e){t.mediaStreamTrack=e.getTracks()[0];var a=t.audio_context.createMediaStreamSource(e);t.recorder=new Recorder(a)}).catch(e)},closeMedia:function(){var t=this;t.mediaStreamTrack&&t.mediaStreamTrack.stop()},startRecording:function(){var t=this;t.startDis=!0,t.stopDis=!1;JSON.parse(sessionStorage.getItem("user"));var e=new FormData,a=t.userData.id,r=sessionStorage.getItem("patient_id");e.append("user_id",a),e.append("patient_id",r),e.append("status","1"),t.timer(),axios({url:"/API/voice-recorder/",data:e,method:"post"}).then(function(t){201==t.data.code&&console.log(t.data.msg)})},stopRecording:function(){var t=this;t.startDis=!1,t.stopDis=!0;JSON.parse(sessionStorage.getItem("user"));var e=new FormData,a=t.userData.id,r=sessionStorage.getItem("patient_id");e.append("user_id",a),e.append("patient_id",r),e.append("status","0"),clearInterval(this.timeInterval),this.timeInterval=null,axios({url:"/API/voice-recorder/",data:e,method:"post"}).then(function(t){202==t.data.code&&console.log(t.data.msg)})},timer:function(){var t=this;null==this.timeInterval&&(this.timeInterval=setInterval(function(){t.seconds+=1,t.seconds>=60&&(t.seconds=0,t.minute=t.minute+1),t.minute>=60&&(t.minute=0,t.hour=t.hour+1),t.timeResult=(t.hour<10?"0"+t.hour:t.hour)+":"+(t.minute<10?"0"+t.minute:t.minute)+":"+(t.seconds<10?"0"+t.seconds:t.seconds)},1e3))},countSecond:function(){var t,e=36e5,a=6e4,r=1e3,n=0,i=0,s=0,o=!1;return o>=e&&(s=Math.floor(o/e)),o=s>0?o-s*e:o,o>=a&&(i=Math.floor(o/a)),o=i>0?o-i*a:o,o>=r&&(n=Math.floor(o/r)),o=n>0?o-n*r:o,t=s>0?(s>9?s:"0"+s)+":":"00:",t+=i>0?(i>9?i:"0"+i)+":":"00:",t+=n>0?n>9?n:"0"+n:"00",t}}}),s=i,o=(a("fcdf"),a("2877")),c=Object(o["a"])(s,r,n,!1,null,"65d20e8a",null);e["default"]=c.exports},fcdf:function(t,e,a){"use strict";var r=a("24ac"),n=a.n(r);n.a}}]);
//# sourceMappingURL=chunk-02b7629c.ea4df4e1.js.map