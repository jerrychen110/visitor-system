(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d2086b7"],{a55b:function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"bg login-bg flex-center"},[s("div",{staticClass:"login-card"},[s("el-card",[s("div",{staticClass:"text-center",attrs:{slot:"header"},slot:"header"},[s("span",[e._v("用户登录")])]),s("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"hide-required-asterisk":!0,"label-width":"80px"}},[s("el-form-item",{attrs:{label:"登录账号",prop:"username"}},[s("el-input",{attrs:{placeholder:"请输入登录账号"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.login("form")}},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),s("el-form-item",{attrs:{label:"登录密码",prop:"password"}},[s("el-input",{attrs:{"show-password":"",type:"password",placeholder:"请输入登录密码"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.login("form")}},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),s("div",[s("el-button",{staticClass:"w-100",attrs:{type:"primary"},on:{click:function(t){return e.login("form")}}},[e._v("登录")]),s("div",{staticClass:"mtm text-right"},[s("small",{staticClass:"text-muted mrs"},[e._v("没有账户，请点击")]),s("router-link",{attrs:{to:"register"}},[s("el-button",{attrs:{type:"warning",size:"mini"}},[e._v("注册")])],1)],1)],1)],1)],1)],1)])},a=[],o=s("f499"),n=s.n(o),i=s("c702"),l={name:"Login",data:function(){return{form:{username:"",password:""},rules:{username:[{required:!0,message:"请输入登录账号",trigger:"blur"}],password:[{required:!0,message:"请输入登录密码",trigger:"blur"},{pattern:/^[a-zA-Z0-9]{4,16}$/,message:"4到16位（字母，数字）"}]}}},created:function(){this.initUserPass()},methods:{initUserPass:function(){var e=this;localStorage.getItem("userName")&&localStorage.getItem("userPass")&&(e.form.username=localStorage.getItem("userName"),e.form.password=localStorage.getItem("userPass"))},login:function(e){var t=this;t.$refs[e].validate(function(e){if(!e)return!1;axios({url:"/API/normal-login/",data:{username:t.form.username,password:t.form.password},method:"post",headers:{"Hide-Message":!0}}).then(function(e){200==e.status?(t.$store.commit("setIsLogin",!0),t.$store.commit("setToken",Object(i["c"])("csrftoken")),t.$store.commit("setRole",e.data.is_superuser?"超级管理员":e.data.is_staff?"管理员":"用户"),t.$store.commit("setUser",n()(e.data)),localStorage.setItem("userName",t.form.username),localStorage.setItem("userPass",t.form.password),t.$message({message:"登录成功！1秒后自动跳转至首页。",type:"success",duration:1e3,onClose:function(){t.$router.push({path:"/"})}})):201==e.data.code&&t.$message({type:"error",message:"用户名或者密码错误!",duration:2e3})})})}}},m=l,u=s("2877"),c=Object(u["a"])(m,r,a,!1,null,null,null);t["default"]=c.exports}}]);
//# sourceMappingURL=chunk-2d2086b7.e4d1423e.js.map