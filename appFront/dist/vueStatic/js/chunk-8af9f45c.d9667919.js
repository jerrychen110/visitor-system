(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8af9f45c"],{"6de7":function(e,a,t){"use strict";t.r(a);var r=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("el-row",[t("el-col",{attrs:{span:16}},[t("el-form",{ref:"form",staticClass:"demo-ruleForm",attrs:{model:e.form,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"用户名",prop:"username",rules:[{required:!0,message:"请输入用户名",trigger:"blur"}]}},[t("el-input",{attrs:{placeholder:"请输入用户名"},model:{value:e.form.username,callback:function(a){e.$set(e.form,"username",a)},expression:"form.username"}})],1),t("el-form-item",{attrs:{label:"用户姓名",prop:"firstname",rules:[{required:!0,message:"请输入用户姓名",trigger:"blur"}]}},[t("el-input",{attrs:{placeholder:"请输入用户姓名"},model:{value:e.form.firstname,callback:function(a){e.$set(e.form,"firstname",a)},expression:"form.firstname"}})],1),t("el-form-item",{attrs:{label:"用户邮箱"}},[t("el-input",{attrs:{placeholder:"请输入用户邮箱"},model:{value:e.form.email,callback:function(a){e.$set(e.form,"email",a)},expression:"form.email"}})],1),t("el-form-item",{attrs:{label:"用户状态"}},[t("el-checkbox",{model:{value:e.form.is_active,callback:function(a){e.$set(e.form,"is_active",a)},expression:"form.is_active"}},[e._v("是否激活用户")]),t("el-checkbox",{model:{value:e.form.is_staff,callback:function(a){e.$set(e.form,"is_staff",a)},expression:"form.is_staff"}},[e._v("是否管理员")]),t("el-checkbox",{model:{value:e.form.is_superuser,callback:function(a){e.$set(e.form,"is_superuser",a)},expression:"form.is_superuser"}},[e._v("是否超级管理员")])],1),t("el-form-item",{attrs:{label:"用户描述"}},[t("el-input",{attrs:{type:"textarea",rows:"5",placeholder:"请输入用户描述"},model:{value:e.form.description,callback:function(a){e.$set(e.form,"description",a)},expression:"form.description"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:function(a){return e.onSubmit("form")}}},[e._v(e._s(e.pageType?"确定编辑":"立即创建"))]),t("el-button",{on:{click:function(a){return e.$router.back(-1)}}},[e._v("取消")])],1)],1)],1)],1)},s=[],o=(t("7f7f"),t("8a99")),i={name:"Creat",components:{UploadFile:o["a"]},data:function(){return{pageType:!1,form:{username:"",firstname:"",last_name:"",password:"",passwordAgain:"",email:"",avatar:[],gender:1,age:0,description:"",is_staff:0,is_active:1,is_superuser:0},componentsSet:{avatar:{name:"avatar",label:"用户头像",accept:".jpg,.png",required:!1}}}},created:function(){this.$route.params.id&&(this.getData(),this.pageType=!0)},methods:{getData:function(){var e=this;axios.get("/API/base-api/user-profile/"+e.$route.params.id+"/").then(function(a){var t=a.data;t.avatar?t.avatar=[{name:t.avatar.substring(t.avatar.lastIndexOf("/")+1)}]:t.avatar=[],e.form=t})},resUploadFile:function(e){this.form[e.set.name]=e.value,this.$refs["form"].clearValidate([e.set.name])},onSubmit:function(e){var a=this;a.$refs[e].validate(function(e){if(!e)return!1;var t=new FormData;t.append("avatar",a.form.avatar),t.append("username",a.form.username),t.append("firstname",a.form.firstname),t.append("last_name",a.form.last_name),t.append("password",a.pageType?a.form.password:"pbkdf2_sha256$120000$7IpGiFgxgOmu$qkTGA80T9jw/3x3MlVHLxUCyoq+K6TG9/pl6uMFZBc4="),t.append("email",a.form.email),t.append("gender",a.form.gender),t.append("age",a.form.age),t.append("description",a.form.description),t.append("is_staff",a.form.is_staff),t.append("is_active",a.form.is_active),t.append("is_superuser",a.form.is_superuser),axios({url:"/API/base-api/user-profile/"+(a.pageType?a.form.id+"/":""),data:t,method:a.pageType?"put":"post"}).then(function(e){a.$router.back(-1)})})}}},n=i,l=t("2877"),m=Object(l["a"])(n,r,s,!1,null,null,null);a["default"]=m.exports},"8a99":function(e,a,t){"use strict";var r=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.resData.set.show,expression:"resData.set.show"}],attrs:{label:e.resData.set.label,prop:e.resData.set.name,rules:[{required:e.resData.set.required,message:"请选择"+e.resData.set.label,disabled:e.resData.set.disabled,trigger:"blur"}]}},[t("el-upload",{attrs:{action:"#","file-list":e.resData.value,"auto-upload":!1,"on-change":e.handleChange,"on-remove":e.handleRemove,accept:e.resData.set.accept}},[t("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("选取文件")]),e.resData.set.accept?t("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传"+e._s(e.resData.set.accept)+"文件")]):e._e()],1)],1)},s=[],o={name:"UploadFile",props:["data"],computed:{resData:function(){var e=this.data;return e.set.required=0!=this.data.set.required,e.set.show=0!=this.data.set.show,this.data}},methods:{handleRemove:function(e,a){this.resData.value=[],this.$emit("resData",this.resData)},handleChange:function(e,a){this.resData.value=[e],this.$emit("resData",this.resData)}}},i=o,n=t("2877"),l=Object(n["a"])(i,r,s,!1,null,null,null);a["a"]=l.exports}}]);
//# sourceMappingURL=chunk-8af9f45c.d9667919.js.map